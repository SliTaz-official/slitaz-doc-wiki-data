======Установка на жесткий диск======


=====Введение=====

Этот документ содержит сведения и инструкции, необходимые для установки SliTaz на жесткий диск. Установка занимает около 10 минут, система после установки будет занимать примерно 80 Мб, поэтому рекомендуется выделить не менее 120 Мб свободного места - в этом случае вы сможете доустановить еще несколько пакетов. Если вы уже, хотя бы немного, освоились в LiveCD, то и установка SliTaz не вызовет у вас затруднений.


=====Установка SliTaz=====

В SliTaz имеется простой инсталлятор, который можно найти в меню Система (System Tools). При установке SliTaz 3.0 сообщения выводятся на английском, поэтому ниже приведены подробные их комментарии.


===Тип установки===

Первый шаг - выбор типа установки: установка с нуля или обновление системы. В большинстве случаев вам понадобится первый тип. После того как вы сделаете выбор, инсталлятор смонтирует ваш CD-ROM и попытается найти файл сжатой файловой системы (//rootfs.gz//). В случае неудачи установка будет прервана.

Если вы получите сообщение о том, что //rootfs.gz// не найден, удостоверьтесь, что диск со SliTaz находится в основном CD/DVD-приводе. Если ошибка возникнет снова, используйте ISO-образ со SliTaz и смонтируйте его в папку ///media/cdrom//, где его должен найти инсталлятор:

<code># mount -o loop slitaz-3.0.iso /media/cdrom</code>


===Раздел жесткого диска для установки===

Следующий шаг - настройка раздела винчестера. Это придется сделать отдельно - в инсталлятор функция подготовки винчестера не входит. Если у вас уже есть чистый раздел, то его можно использовать, в противном случае создайте раздел при помощи программы GParted (в графическом режиме) или утилитой fdisk (из командной строки).

Например, если вы хотите установить SliTaz на второй раздел первого жесткого диска (обозначенного как hda), введите

<code>/dev/hda2</code>


===Форматирование===

<note warning>При форматировании раздела все данные на нём **полностью** уничтожаются. Убедитесь, что на выбранном разделе не осталось нужных вам данных, поскольку //эта операция необратима//.</note>

Следующим шагом вам предложат отформатировать выбранный раздел в системе ext3. Ext3 - это мощная и стабильная журналируемая файловая система. Если раздел уже отформатирован в ext3, пропустите этот шаг, если нет - согласитесь на форматирование.


===Выбор имени хоста===

Имя хоста (hostname) позволит присвоить имя вашему компьютеру, которое будет использоваться для идентификации компьютера в сети. Его можно будет изменить после установки системы. Имя должно быть не длиннее 64 символов и может включать только латинские буквы, цифры и знак дефиса.


===Установка загрузчика GRUB===

Когда установка будет завершена, вы можете также установить загрузчик GRUB. GRUB может загружать практически любую операционную систему и имеет доступный для понимания файл конфигурации. Изменения, вносимые в этот файл, активируются сразу же, не требуя дополнительных команд.

Если GRUB уже установлен на вашем компьютере, пропустите этот шаг и внесите необходимые изменения в конфигурационный файл GRUB (menu.lst); [[#Загрузчик GRUB|см.ниже]] для дальнейшей информации. Обратите внимание, что SliTaz создает файл конфигурации на том разделе, который был выбран при установке, и его можно использовать в качестве примера (///mnt/target/boot/grub/menu.lst//).


===Завершение установки===

Когда инсталлятор, наконец, завершит работу, вы можете остаться в SliTaz или перезагрузиться, чтобы попасть в уже установленную систему. Первая загрузка похожа на загрузку с Live CD - вам предложат выбрать язык системы, раскладку клавиатуры, настроить звуковую карту и разрешение экрана. В дальнейшем при загрузке настраивать уже ничего не понадобится, а сами настройки можно будет изменить либо вручную, либо при помощи утилит //tazlocale// или //tazx//.


=====Установка вручную=====

SliTaz можно также установить вручную из командной строки, используя CD-ROM или ISO-образ. Нижеприведенные команды можно вставлять прямо в терминал.

Для начала подготовьте и смонтируйте необходимый раздел жесткого диска. Например, возьмем второй раздел первого жесткого диска (///dev/hda2//):

<code>
# mkdir /mnt/target
# mount /dev/hda2 /mnt/целевая_папка
</code>

===Монтирование CD-ROM или образа ISO===

Смонтируйте CD-ROM...

<code># mount /dev/cdrom /media/cdrom</code>

...или образ ISO:

<code># mount -o loop slitaz-3.0.iso /media/cdrom</code>

===Установка и распаковка===

Мы подготовили раздел для установки и смонтировали носитель, теперь нужно скопировать файлы с носителя в подготовленный раздел и распаковать сжатую файловую систему (//rootfs.gz//).

  * Создайте папку boot и скопируйте в нее ядро Linux:

<code>
# mkdir /mnt/целевая_папка/boot
# cp -a /media/cdrom/boot/vmlinuz-* /mnt/целевая_папка/boot
</code>

  * Скопируйте корневую файловую систему:

<code># cp /media/cdrom/boot/rootfs.gz /mnt/целевая_папка</code>

Теперь, когда все необходимые файлы находятся в разделе установки, перейдите в папку назначения (командой //cd//) и распакуйте файловую систему командами //lzma// и //cpio//:

<code>
# cd /mnt/целевая_папка
# lzma d rootfs.gz -so | cpio -id
# rm rootfs.gz init
</code>

Вот и всё — SliTaz установлен! Перед тем как перезагрузиться, проверьте, установлен ли GRUB, и добавьте в его конфигурацию параметры, необходимые для запуска SliTaz (см. ниже).


=====Загрузчик GRUB=====

GRUB — это универсальный загрузчик, который может загружать почти любую операционную систему, включая Linux, BSD и Windows. GRUB использует файл настроек под названием //menu.lst//.

Если вы установили SliTaz через установщик вместе с GRUB, то ставить GRUB вручную уже не нужно — просто перезагрузитесь.

Если же GRUB не установлен, то для его установки в MBR (Master Boot Record, главная загрузочная запись) с использованием корневой директории ///mnt/target// и раздела жесткого диска hda, введите следующую команду (обратите внимание, что номер раздела не ставится):

<code># grub-install --root-directory=/mnt/target /dev/hda</code>

После этого можно создать файл конфигурации GRUB и добавить в него параметры для загрузки SliTaz. Вы можете изменять этот файл (//menu.lst//) в вашем любимом текстовом редакторе, например, Nano или Leafpad.

<code># leafpad /mnt/target/boot/grub/menu.lst</code>


===Пример файла /boot/grub/menu.lst===

<file>
title SliTaz GNU/Linux 3.0 (Kernel 2.6.34-slitaz)
      root (hd0,0)
      kernel /boot/vmlinuz-2.6.34-slitaz root/dev/hda1 vga=normal
</file>

Еще раз удостоверьтесь, что всё настроено правильно, а затем перезагрузитесь:

<code># reboot</code>

Вы увидите меню GRUB и в нём пункт, соответствующий SliTaz.


=====Двойная загрузка с Windows=====

На [[http://forum.slitaz.org/|форуме]] часто задают вопрос: как сделать двойную загрузку для SliTaz и Windows? Всё очень просто. Нужно всего лишь добавить в файл ///boot/grub/menu.lst// следующие строки:

<file>
title Microsoft Windows
      rootnoverify (hd0,0)
      chainloader +1
</file>

В этом примере Windows находится на первом разделе первого жесткого диска (в GRUB нумерация начинается с нуля). Если в вашем случае это не так, измените данный параметр. Скажем, Windows находится на жестком диске после SliTaz, тогда вторая строка будет иметь такой вид:

<file>rootnoverify (hd0,1)</file>

Бóльшая часть операционных систем либо имеют свой собственный загрузчик (как, к примеру, Windows и BSD), либо могут быть загружены напрямую через GRUB.


=====Установка SliTaz на флешку=====

Если вы хотите установить SliTaz на флешку, то для этого нужно лишь добавить параметр "rootdelay" в файл //menu.lst//, чтобы дать ядру Linux время определить флешку:

<file>
title SliTaz GNU/Linux 3.0 (Kernel 2.6.34-slitaz)
      root (hd0,0)
      kernel /boot/vmlinuz-2.6.34-slitaz root/dev/hda1 vga=normal rootdelay=10
</file>

----
Статью перевел [[http://forum.slitaz.org/index.php/profile/1273/Cyril|Cyril]]
