====== Оконная система Х ======


===== Х11 =====

Оконная система Х, или Х11, имеет менеджер окон, надстраивающийся над Х-сервером.

SliTaz 2.0 по умолчанию использует легкий Х-сервер Xvesa от проекта Xorg (www.x.org).

В SliTaz 3.0 используется сервер Xorg, однако есть и сборка на основе Xvesa.

X-сервер можно запустить из логин-менеджера Slim или напрямую из терминала Linux командой //startx//. В последнем случае необходимо вначале отключить логин-менеджер. Для перенастройки Х-сессии вы можете использовать утилиту //tazx// от имени root или от имени текущего пользователя, если вы запускаете Х из терминала.


===== Tazx — настройка Х в SliTaz =====

Tazx используется для настройки Х-сессий в системе SliTaz. Запустив программу, просто выберите нужное разрешение экрана и нажмите ОК. Вы также можете выбрать сессию Xorg, указав тот видеодрайвер, который наиболее подходит под ваше оборудование.

После первого запуска команды //startx// созданная конфигурация сохраняется в исполняемых файлах //~/.xsession// и //~/.xinitrc//. Они будут впоследствии использоваться для запуска Х-сессии как из Slim, так и из терминала. При необходимости их можно отредактировать в любом текстовом редакторе.

Tazx можно также использовать для смены оконного менеджера по умолчанию, например:

<code>tazx jwm</code>


===== Slim — простой менеджер входа =====

Slim — это легковесный менеджер сессий, который очень легок в настройке и поддерживает темы оформления. Файл конфигурации находится в ///etc/slim.conf//. B Slim задается список доступных оконных менеджеров, который вызывается клавишей F1, имя пользователя и тема по умолчанию, а также параметры X window system. Slim предлагает специальные команды для ввода в консоли с целью облегчить управление сессиями.

В режиме LiveCD вы можете отключить Slim загрузочной опцией //screen=text//. В установленной системе вы можете удалить пакет slim или просто убрать его из переменной //RUN_DAEMONS// файла ///etc/rcS.conf//.

Более подробную информацию и темы оформления можно найти на сайте Slim.


=== Пользователь по умолчанию ===

В Slim можно автоматически входить в систему от имени определенного пользователя, по умолчанию и для удобства создан пользователь tux. Имя пользователя можно изменить в файле ///etc/slim.conf//, ему соответствует строка //default_user//. Чтобы отключить автологин и иметь возможность выбирать пользователя при входе, сотрите имя пользователя в этой строке. Пример:

<file> default_user        tux </file>


===== Xorg =====

Настройка Xorg осуществляется в консольном режиме. Установка и настройка сервера относительно просты. Кроме того, вы всегда можете отказаться от него и вернуться в Xvesa. Xorg поставляется в виде модулей, что означает, что вам понадобится установить сервер, несколько файлов конфигурации и драйвер, соответствующий вашей видеокарте. Кстати, пакет //xorg-server// содержит все необходимые зависимости, чтобы работать с драйвером vesa напрямую. Для минимальной установки сервера наберите:

<code># tazpkg get-install xorg-server</code>

После установки можно заняться настройкой или установить видеодрайвер (если, конечно, вы знаете, как он называется). Для примера установим драйвер Nvidia и выведем список всех доступных драйверов:

<code>
# tazpkg get-install xorg-xf86-video-nv
# tazpkg search xorg-xf86-video
</code>


=== Автоматическая настройка сервера ===

Настроить Xorg можно двумя способами: командой «Xorg -configure» или с помощью скрипта //xorgconfig//. Желательно начать с первого способа. Автонастройку Xorg нужно проводить в режиме консоли без запущенного Х-сервера. Для этого закройте все окна приложений и нажмите Ctrl-Alt-Del. Вы попадете в консольный режим. Теперь запустите автонастройку Xorg и скопируйте созданный файл конфигурации в папку ///etc/X11//:

<code>
# Xorg -configure
# cp /root/xorg.conf.new /etc/X11/xorg.conf
</code>

После этого переведите Slim на использование Xorg вместо Xvesa и перезапустите менеджер окон.


=== Использование Slim в связке с Xorg ===

В файле настроек Slim (///etc/slim.conf//) закомментируйте строку с Xvesa, а в переменную //default_xserver// подставьте адрес к Xorg:

<file>
default_xserver     /usr/bin/Xorg
#default_xserver     /usr/bin/Xvesa
#xserver_arguments   -ac -shadow dpms +extension Composite -screen 1024x768x24
</file>

Теперь можно запустить Slim и вернуться в графический режим. Slim является демоном, и его можно запустить и остановить через консоль, например:

<code># /etc/init.d/slim start</code>


=== Файл настроек xorg.conf ===

Xorg использует файл настроек ///etc/X11/xorg.conf//. Он содержит несколько разделов, где указаны пути к программам, загружаемые модули, настройки по умолчанию для экрана, мыши, клавиатуры и т.д. В этой статье приводятся лишь несколько примеров, так что советуем запустить //xorgconfig// для создания файла целиком.

Клавиатура (английская раскладка):

<file>
Section "InputDevice"
	Identifier  "Keyboard0"
	Driver      "kbd"
	Option      "XkbRules"	"xorg"
	Option      "XkbModel"	"pc105"
	Option      "XkbLayout"	"en"
	Option      "XkbVariant"	"en"
EndSection
</file>

Протокол автоопределения мыши:

<file>
Section "InputDevice"
	Identifier  "Mouse0"
	Driver      "mouse"
	Option	    "Protocol" "auto"
	Option	    "Device" "/dev/input/mice"
	Option	    "ZAxisMapping" "4 5 6 7"
EndSection
</file>

Композитные расширения:

<file>
Section "Extensions"
	Option      "Composite" "1"
EndSection
</file>


===== Использование Xvesa в качестве X-терминала =====

Xvesa можно использовать как Х-терминал, если ваш компьютер подключен к сети и поддерживает соединения по протоколу Xdmcp. Для этого запустите Xvesa с опцией //-query// и именем (или IP-адресом) компьютера. Пример для локальной сети и адреса 192.168.0.2:

<code>$ Xvesa -ac -shadow -screen 1024x768x24 -query 192.168.0.2</code>
	
Использование графического удаленного сервера может быть очень полезным, хотя время отклика приложений сильно зависит от скорости Интернета и удаленной машины. Этот способ отлично работает в локальной сети (LAN) и позволяет управлять приложениями на удаленном компьютере с экрана собственного. При этом удаленный компьютер может иметь несколько учетных записей либо для одновременного использования, либо для прямого доступа.


===== Шрифты =====

Пакет //fontconfig// занимается управлением шрифтов. Он содержит средства для установки, поиска и различных операций со шрифтами. Шрифты можно устанавливать как в пользовательское пространство, так и на уровень системы. В первом случае у каждого пользователя будет свой набор шрифтов, во втором — системный администратор устанавливает шрифты для всех пользователей в системе. Если ваш SliTaz LiveCD ассоциирован с флешкой, вы можете установить шрифты и использовать их во время следующего запуска с CD-ROM.


=== Установка шрифтов ===

Системные шрифты устанавливаются в папку ///usr/share/fonts//. Базовая версия SliTaz содержит шрифты TTF Vera, она занимают мало места и корректно отображаются. В корневом каталоге пользователя //~/// шрифты находятся в скрытой папке //.fonts//. Эту папку можно создать как в графическом файловом менеджере, так и при помощи командной строки:

<code>$ mkdir ~/.fonts</code>
	
После установки шрифтов запустите утилиту //fc-cache// для создания файлов настроек. Тем самым ваши шрифты будут доступны другим приложениям.

<code>$ fc-cache</code>

----
Статью перевел Кирилл Шевцов
